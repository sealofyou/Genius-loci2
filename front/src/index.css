@tailwind base;
@tailwind components;
@tailwind utilities;

/* Leaflet 自定义标记样式 */
.custom-mood-marker,
.user-location-marker {
  background: transparent !important;
  border: none !important;
}

/* 隐藏 Leaflet 默认图标样式 */
.leaflet-marker-icon {
  background: transparent !important;
  border: none !important;
}

@layer base {
  * {
    -webkit-tap-highlight-color: transparent;
    -webkit-touch-callout: none;
  }
  
  html {
    font-family: 'Noto Serif SC', Georgia, 'Songti SC', serif;
    background-color: #FAFAF5;
    color: #333333;
  }

  body {
    overscroll-behavior: none;
    -webkit-overflow-scrolling: touch;
  }

  /* 隐藏滚动条但保持滚动功能 */
  ::-webkit-scrollbar {
    display: none;
  }
  
  * {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }
}

@layer components {
  /* 水彩晕染效果 */
  .watercolor-blob {
    filter: url(#watercolor-filter);
    mix-blend-mode: multiply;
  }

  /* 毛玻璃效果 */
  .glass {
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
    background: rgba(250, 250, 245, 0.7);
  }

  /* 雾气效果 */
  .mist {
    backdrop-filter: blur(40px);
    -webkit-backdrop-filter: blur(40px);
    background: rgba(250, 250, 245, 0.85);
  }

  /* 宣纸纹理 */
  .paper-texture {
    background-image: 
      radial-gradient(ellipse at 20% 30%, rgba(222, 184, 135, 0.05) 0%, transparent 50%),
      radial-gradient(ellipse at 80% 70%, rgba(176, 196, 222, 0.05) 0%, transparent 50%),
      url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='4' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='0.03'/%3E%3C/svg%3E");
  }

  /* 指纹纹理按钮 */
  .fingerprint-btn {
    background-image: 
      radial-gradient(circle at 50% 50%, transparent 30%, rgba(51, 51, 51, 0.03) 31%, transparent 32%),
      radial-gradient(circle at 50% 50%, transparent 35%, rgba(51, 51, 51, 0.02) 36%, transparent 37%),
      radial-gradient(circle at 50% 50%, transparent 40%, rgba(51, 51, 51, 0.02) 41%, transparent 42%),
      radial-gradient(circle at 50% 50%, transparent 45%, rgba(51, 51, 51, 0.01) 46%, transparent 47%);
  }

  /* 票根撕边效果 */
  .ticket-edge {
    --mask: radial-gradient(circle at 8px 50%, transparent 6px, #000 6.5px);
    -webkit-mask: var(--mask);
    mask: var(--mask);
    -webkit-mask-size: 16px 100%;
    mask-size: 16px 100%;
    -webkit-mask-position: -8px;
    mask-position: -8px;
  }

  /* 信纸边框 */
  .letter-border {
    border: 1px solid rgba(51, 51, 51, 0.1);
    box-shadow: 
      inset 0 0 30px rgba(222, 184, 135, 0.1),
      0 4px 20px rgba(51, 51, 51, 0.05);
  }

  /* 墨水化动效 */
  .ink-dissolve {
    animation: inkSpread 1.5s ease-out forwards;
  }

  /* 安全区域容器 */
  .safe-area-top {
    padding-top: env(safe-area-inset-top);
  }

  .safe-area-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  .safe-area-x {
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }
}

@layer utilities {
  /* 文艺呼吸感间距 */
  .breath-y {
    padding-top: 2rem;
    padding-bottom: 2rem;
  }

  .breath-y-lg {
    padding-top: 4rem;
    padding-bottom: 4rem;
  }

  /* 文字渲染优化 */
  .text-render {
    text-rendering: optimizeLegibility;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
}
